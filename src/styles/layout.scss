// ============================================================================
// LAYOUT SYSTEM - OTIMIZADO
// ============================================================================

// Mixins globais
@mixin transition-smooth {
  @apply transition-all duration-300 ease-in-out;
}
@mixin interactive-hover {
  @include transition-smooth;
  @apply cursor-pointer;
  &:hover {
    @apply opacity-80;
  }
  &:focus-visible {
    @apply outline-none ring-2 ring-theme-primary ring-offset-2 rounded;
  }
  &:disabled {
    @apply opacity-50 cursor-not-allowed pointer-events-none;
  }
}
@mixin backdrop-blur {
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

// ============================================================================
// HEADER
// ============================================================================

.header {
  @include transition-smooth;
  @apply w-full z-50;

  // Variantes
  &--default {
    @apply bg-theme-surface border-theme-border;
  }
  &--minimal {
    @apply bg-transparent border-none;
  }
  &--sticky {
    @apply bg-theme-surface border-theme-border;
    @include backdrop-blur;
  }
  &--transparent {
    @apply bg-transparent border-none;
    @include backdrop-blur;
  }
  &--fixed {
    @apply fixed top-0;
  }

  // Elementos
  &__nav {
    @apply mx-auto px-4 py-4 flex items-center justify-between;
  }
  &__logo {
    @include interactive-hover;
    @apply text-xl font-bold theme-text-primary;
  }

  &__nav-desktop {
    @apply hidden md:flex items-center space-x-8;
  }
  &__nav-link {
    @include interactive-hover;
    @apply relative theme-text-primary pb-1;

    &::after {
      content: '';
      @apply absolute bottom-0 left-0 w-0 h-0.5 bg-theme-primary;
      transition: width 0.3s ease-in-out;
    }

    &--active {
      @apply font-medium theme-text-primary;
      &::after {
        @apply w-full;
      }
    }

    &:hover:not(.header__nav-link--active)::after {
      @apply w-full opacity-50;
    }
  }

  &__controls {
    @apply flex items-center space-x-2;
  }
  &__theme-toggle,
  &__mobile-toggle {
    @include interactive-hover;
    @apply p-2 theme-text-primary;
  }

  // Mobile menu
  &__mobile-menu {
    @apply md:hidden border-t theme-border;
    animation: slideDown 0.2s ease-out;

    &-nav {
      @apply mx-auto px-4 py-2 space-y-1;
    }
    &-link {
      @include interactive-hover;
      @apply block w-full text-left py-2 px-3 rounded relative theme-text-primary;

      &::before {
        content: '';
        @apply absolute left-0 top-0 w-0 h-full bg-theme-primary;
        transition: width 0.3s ease-in-out;
      }

      &--active {
        @apply bg-theme-accent/10;
        &::before {
          @apply w-1;
        }
      }

      &:not(.header__mobile-link--active):hover {
        @apply bg-theme-accent/5;
      }
    }
  }
}

// ============================================================================
// FOOTER
// ============================================================================

.footer {
  @include transition-smooth;
  @apply mt-auto;

  // Variantes
  &--default {
    @apply bg-theme-surface border-t theme-border;
  }
  &--minimal {
    @apply bg-transparent border-none;
  }
  &--extended {
    @apply bg-theme-surface border-t theme-border;
  }

  // Layout
  &__content {
    @apply mx-auto px-4 py-6;
  }
  &__wrapper {
    @apply flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0;
  }

  &__links {
    @apply flex space-x-6 text-sm;
  }
  &__link {
    @include interactive-hover;
    @apply text-sm theme-text-primary;

    &--external::after {
      content: ' ↗';
      @apply text-xs opacity-60;
    }
  }

  &__social {
    @apply flex items-center space-x-4 mt-4 sm:mt-0;
  }
  &__social-link {
    @include interactive-hover;
    @apply text-lg theme-text-primary;
  }
  &__copyright {
    @apply text-sm theme-text-secondary;
  }

  // Layout extendido
  &--extended {
    .footer__wrapper {
      @apply flex-col space-y-6;
    }
    .footer__main {
      @apply flex flex-col sm:flex-row justify-between items-start w-full space-y-4 sm:space-y-0;
    }
    .footer__bottom {
      @apply flex flex-col sm:flex-row justify-between items-center w-full pt-4 space-y-2 sm:space-y-0 border-t theme-border;
    }
  }
}

// ============================================================================
// MAIN LAYOUT
// ============================================================================

.main-layout {
  @apply min-h-screen flex flex-col bg-theme-background theme-text-primary;
  transition: var(--transition-theme);

  // Espaçamentos
  &--compact {
    @apply space-y-24;
  }
  &--normal {
    @apply space-y-48;
  }
  &--relaxed {
    @apply space-y-64;
  }

  &__content {
    @apply flex-grow mx-auto w-full pb-8;
  }
  &__container {
    @apply mx-auto w-full;
  }
}

// ============================================================================
// CONTAINERS
// ============================================================================

.layout-container {
  @apply mx-auto;

  &--sm {
    @apply max-w-2xl px-4;
  }
  &--md {
    @apply max-w-4xl px-4;
  }
  &--lg {
    @apply max-w-screen-2xl px-4;
  }
  &--xl {
    @apply max-w-screen-2xl px-4;
  }
  &--full {
    @apply max-w-full px-4;
  }
}

// ============================================================================
// RESPONSIVIDADE
// ============================================================================

@media (max-width: 640px) {
  .header__nav,
  .footer__content {
    @apply px-3 py-3;
  }
  .main-layout--compact {
    @apply space-y-16;
  }
  .main-layout--normal {
    @apply space-y-24;
  }
  .main-layout--relaxed {
    @apply space-y-32;
  }
}

// ============================================================================
// ANIMAÇÕES
// ============================================================================

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
