@use 'sass:map';
@use 'sass:list';

// ============================================================================
// SETTINGS - TOKENS DE DESIGN
// ============================================================================

:root {
  --transition-base: 300ms ease-in-out;
  --blur-backdrop: blur(8px);
}

// ============================================================================
// TOOLS - MIXINS E FUNÇÕES
// ============================================================================

@mixin smooth-transition($properties: all, $duration: 300ms) {
  transition: #{$properties} #{$duration} ease-in-out;
}

@mixin interactive-base {
  @include smooth-transition;
  @apply cursor-pointer outline-none;

  &:hover {
    @apply opacity-80;
  }

  &:focus {
    @apply outline-none;
  }

  &:disabled {
    @apply opacity-50 cursor-not-allowed pointer-events-none;
  }
}

@mixin backdrop-blur {
  @apply backdrop-blur-sm;
}

@mixin surface-styles {
  background-color: rgb(var(--color-surface));
  border-color: rgb(var(--color-border));
}

@mixin text-variants {
  color: rgb(var(--color-text));

  &--primary {
    color: rgb(var(--color-primary));
  }

  &--secondary {
    color: rgb(var(--color-secondary));
  }
}

@mixin animated-underline($color: --color-primary) {
  @apply relative;

  &::after {
    content: '';
    @apply absolute bottom-0 left-0 w-0 h-0.5;
    background-color: rgb(var(#{$color}));
    @include smooth-transition(width);
  }

  &--active::after,
  &:hover::after {
    @apply w-full;
  }

  &:hover:not(&--active)::after {
    @apply opacity-50;
  }
}

@mixin content-container {
  @apply mx-auto w-full px-4 md:px-6 max-w-7xl;
}

// ============================================================================
// BASE/ELEMENTS - ESTILOS GENÉRICOS
// ============================================================================

.layout-container {
  @include content-container;
}

// ============================================================================
// COMPONENTS - HEADER
// ============================================================================

.header {
  @include smooth-transition;
  @apply w-full z-50;

  // Variantes de estilo
  &--default,
  &--sticky {
    @include surface-styles;
    @apply border-b;
  }

  &--minimal,
  &--transparent {
    @apply bg-transparent border-none;
  }

  &--sticky,
  &--transparent {
    @include backdrop-blur;
  }

  &--fixed {
    @apply fixed top-0;
  }

  &--scrolled {
    @apply shadow-sm;
  }

  // Estados
  &--disabled {
    @apply opacity-50 pointer-events-none;
  }

  // Layout principal
  &__nav {
    @include content-container;
    @apply py-3 md:py-4 flex items-center justify-between;
  }

  &__logo {
    @include interactive-base;
    @include text-variants;
    @apply text-xl font-bold;
  }

  // Desktop navigation
  &__nav-desktop {
    @apply hidden md:flex items-center space-x-8;
  }

  &__nav-link {
    @include interactive-base;
    @include animated-underline;
    @include text-variants;
    @apply pb-1;

    &--active {
      @apply font-medium;
      color: rgb(var(--color-primary));
    }
  }

  // Controls section
  &__controls {
    @apply flex items-center space-x-2;
  }

  &__theme-toggle,
  &__mobile-toggle {
    @include interactive-base;
    @include text-variants;
    @apply p-2;
  }

  &__mobile-toggle {
    @apply md:hidden;
  }

  // Mobile menu
  &__mobile-menu {
    @apply md:hidden border-t;
    border-color: rgb(var(--color-border));
    animation: slideDown 200ms ease-out;
  }

  &__mobile-nav {
    @include content-container;
    @apply py-2 space-y-1;
  }

  &__mobile-link {
    @include interactive-base;
    @include smooth-transition;
    @include text-variants;
    @apply block w-full text-left py-2 px-3 rounded relative;

    &::before {
      content: '';
      @apply absolute left-0 top-0 w-0 h-full;
      background-color: rgb(var(--color-primary));
      @include smooth-transition(width);
    }

    &--active {
      background-color: rgb(var(--color-primary) / 0.1);

      &::before {
        @apply w-1;
      }
    }

    &:hover:not(&--active) {
      background-color: rgb(var(--color-secondary) / 0.05);
    }
  }
}

// ============================================================================
// COMPONENTS - FOOTER
// ============================================================================

.footer {
  @include smooth-transition;
  @apply mt-auto;

  // Variantes
  &--default,
  &--extended {
    @include surface-styles;
    @apply border-t;
  }

  &--minimal {
    @apply bg-transparent border-none;
  }

  &--sticky {
    @apply sticky bottom-0;
  }

  // Layout principal
  &__content {
    @include content-container;
    @apply py-6;
  }

  &--compact &__content {
    @apply py-4;
  }

  &__wrapper {
    @apply flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0;
  }

  &__links {
    @apply flex space-x-6 text-sm;

    &--extended {
      @apply flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-6;
    }
  }

  &__link {
    @include interactive-base;
    @include text-variants;
    @apply text-sm;

    &--external::after {
      content: ' ↗';
      @apply text-xs opacity-60;
    }
  }

  &__social {
    @apply flex items-center space-x-4 mt-4 sm:mt-0;

    &-link {
      @include interactive-base;
      @include text-variants;
      @apply text-lg;
    }
  }

  &__copyright {
    @include text-variants;
    @apply text-sm;
  }

  // Layout estendido
  &--extended {
    .footer__wrapper {
      @apply flex-col space-y-6;
    }

    .footer__main {
      @apply flex flex-col sm:flex-row justify-between items-start w-full space-y-4 sm:space-y-0;
    }

    .footer__bottom {
      @apply flex flex-col sm:flex-row justify-between items-center w-full pt-4 space-y-2 sm:space-y-0;
      border-top: 1px solid rgb(var(--color-border));
    }
  }
}

// ============================================================================
// COMPONENTS - MAIN LAYOUT
// ============================================================================

.main-layout {
  @apply min-h-screen flex flex-col;
  background-color: rgb(var(--color-background));
  color: rgb(var(--color-text));
  transition: var(--transition-theme);

  // Espaçamento responsivo
  &--compact {
    @apply space-y-16 sm:space-y-20;
  }

  &--normal {
    @apply space-y-20 sm:space-y-24;
  }

  &--relaxed {
    @apply space-y-24 sm:space-y-32;
  }

  // Layout do conteúdo
  &__content {
    @apply flex-grow pb-8;
  }

  &__container {
    @include content-container;
  }
}

// ============================================================================
// UTILITIES - ANIMAÇÕES
// ============================================================================

@keyframes slideDown {
  from {
    @apply opacity-0;
    transform: translateY(-0.625rem);
  }
  to {
    @apply opacity-100;
    transform: translateY(0);
  }
}

// ============================================================================
// MEDIA QUERIES - RESPONSIVIDADE
// ============================================================================

// Breakpoints específicos para componentes que precisam de customização adicional
@media (max-width: 768px) {
  .header {
    &__nav {
      @apply py-3;
    }

    &__logo {
      @apply text-lg;
    }
  }

  .footer {
    &__content {
      @apply py-4;
    }

    &__wrapper {
      @apply space-y-3;
    }

    &__links {
      @apply flex-col space-x-0 space-y-2;
    }
  }
}

@media (min-width: 1024px) {
  .main-layout {
    &--compact {
      @apply space-y-24;
    }

    &--normal {
      @apply space-y-32;
    }

    &--relaxed {
      @apply space-y-40;
    }
  }
}
