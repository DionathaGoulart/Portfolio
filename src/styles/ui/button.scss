// ============================================================================
// BUTTON COMPONENT STYLES
// ============================================================================

// ============================================================================
// VARIÁVEIS
// ============================================================================
$theme-colors:
  primary, secondary, accent, text, textSecondary, error, success, warning;
$button-scale: 1.05;

// ============================================================================
// MIXINS
// ============================================================================
@mixin button-transition {
  @apply transform transition-all duration-200 ease-in-out;
}

@mixin button-hover-scale {
  &:hover:not(:disabled) {
    transform: scale(#{$button-scale});
  }
}

@mixin button-focus($color) {
  outline: none;

  &:focus {
    box-shadow:
      0 0 0 2px rgb(var(--color-background)),
      0 0 0 4px rgb(var(--color-#{$color}) / 0.5);
  }
}

// ============================================================================
// BASE CLASS
// ============================================================================
.btn {
  @include button-transition;
  @include button-hover-scale;
  @apply rounded-md font-medium cursor-pointer inline-flex items-center justify-center;

  // Estados
  &:disabled {
    @apply opacity-50 cursor-not-allowed;

    &:hover {
      transform: none !important;
    }
  }

  &--loading {
    @apply relative;

    &::after {
      content: '';
      @apply absolute inset-0 rounded-md;
      background: rgba(255, 255, 255, 0.1);
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
  }

  &--with-icon {
    @apply gap-2;

    .btn__icon {
      @apply w-4 h-4 flex-shrink-0;
    }
  }
}

// ============================================================================
// TAMANHOS
// ============================================================================
.btn {
  &--pequeno {
    @apply px-3 py-1.5 text-xs sm:text-sm;

    &.btn--with-icon .btn__icon {
      @apply w-3 h-3;
    }
  }

  &--medio {
    @apply px-4 py-2 text-sm sm:text-base;

    &.btn--with-icon .btn__icon {
      @apply w-4 h-4;
    }
  }

  &--grande {
    @apply px-6 py-3 text-base sm:text-lg;

    &.btn--with-icon .btn__icon {
      @apply w-5 h-5;
    }
  }
}

// ============================================================================
// VARIANTE SOLID
// ============================================================================
@mixin button-solid($color) {
  @include button-focus($color);
  background-color: rgb(var(--color-#{$color}));
  color: rgb(var(--color-text));
  border: 2px solid transparent;

  &:hover:not(:disabled) {
    background-color: transparent;
    color: rgb(var(--color-#{$color}));
    border-color: rgb(var(--color-#{$color}));
  }
}

// Casos especiais para solid
@mixin button-solid-text {
  @include button-focus(text);
  background-color: rgb(var(--color-text));
  color: rgb(var(--color-textSecondary));
  border: 2px solid transparent;

  &:hover:not(:disabled) {
    background-color: transparent;
    color: rgb(var(--color-text));
    border-color: rgb(var(--color-text));
  }
}

@mixin button-solid-text-secondary {
  @include button-focus(textSecondary);
  background-color: rgb(var(--color-textSecondary));
  color: rgb(var(--color-text));
  border: 2px solid rgb(var(--color-text));

  &:hover:not(:disabled) {
    background-color: rgb(var(--color-text));
    color: rgb(var(--color-textSecondary));
  }
}

// Gerar classes solid
@each $color in $theme-colors {
  .btn--solid-#{$color} {
    @if $color == text {
      @include button-solid-text;
    } @else if $color == textSecondary {
      @include button-solid-text-secondary;
    } @else {
      @include button-solid($color);
    }
  }
}

// ============================================================================
// VARIANTE OUTLINE
// ============================================================================
@mixin button-outline($color) {
  @include button-focus($color);
  background-color: transparent;
  color: rgb(var(--color-#{$color}));
  border: 2px solid rgb(var(--color-#{$color}));

  &:hover:not(:disabled) {
    background-color: rgb(var(--color-#{$color}));
    color: rgb(var(--color-text));
  }
}

// Casos especiais para outline
@mixin button-outline-text {
  @include button-focus(text);
  background-color: transparent;
  color: rgb(var(--color-text));
  border: 2px solid rgb(var(--color-text));

  &:hover:not(:disabled) {
    background-color: rgb(var(--color-text));
    color: rgb(var(--color-background));
  }
}

@mixin button-outline-text-secondary {
  @include button-focus(textSecondary);
  background-color: transparent;
  color: rgb(var(--color-text));
  border: 2px solid rgb(var(--color-text));

  &:hover:not(:disabled) {
    background-color: rgb(var(--color-text));
    color: rgb(var(--color-textSecondary));
  }
}

// Gerar classes outline
@each $color in $theme-colors {
  .btn--outline-#{$color} {
    @if $color == text {
      @include button-outline-text;
    } @else if $color == textSecondary {
      @include button-outline-text-secondary;
    } @else {
      @include button-outline($color);
    }
  }
}

// ============================================================================
// VARIANTE GHOST
// ============================================================================
@mixin button-ghost($color) {
  @include button-focus($color);
  background-color: transparent;
  color: rgb(var(--color-#{$color}));
  border: 2px solid transparent;

  &:hover:not(:disabled) {
    background-color: rgb(var(--color-#{$color}) / 0.1);
  }
}

// Gerar classes ghost
@each $color in $theme-colors {
  .btn--ghost-#{$color} {
    @include button-ghost($color);
  }
}

// ============================================================================
// CONTAINER DE BOTÕES
// ============================================================================
.btn-container {
  @apply flex;

  &--start {
    @apply justify-start;
  }

  &--center {
    @apply justify-center;
  }

  &--end {
    @apply justify-end;
  }
}

// ============================================================================
// GRUPO DE BOTÕES
// ============================================================================
.btn-group {
  @apply flex;

  .btn {
    @apply rounded-none;
    border-right: none;

    &:first-child {
      @apply rounded-l-md;
    }

    &:last-child {
      @apply rounded-r-md;
      border-right: 2px solid;
    }

    &:only-child {
      @apply rounded-md;
      border-right: 2px solid;
    }
  }
}

// ============================================================================
// LOADING SPINNER
// ============================================================================
.btn__spinner {
  @apply animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full;
}
