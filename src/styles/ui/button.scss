// ============================================================================
// BUTTON COMPONENT STYLES - VERSÃO OTIMIZADA E MELHORADA
// ============================================================================

// ============================================================================
// VARIÁVEIS E CONFIGURAÇÕES
// ============================================================================
$theme-colors:
  primary, secondary, accent, text, textSecondary, error, success, warning;
$button-scale: 1.05;

// ============================================================================
// MIXINS
// ============================================================================
@mixin button-transition {
  @apply transform transition-all duration-200 ease-in-out;
}

@mixin button-hover-scale {
  &:hover:not(:disabled) {
    transform: scale(#{$button-scale});
  }
}

@mixin button-focus($color) {
  &:focus {
    outline: none;
    box-shadow:
      0 0 0 2px rgb(var(--color-background)),
      0 0 0 4px rgb(var(--color-#{$color}) / 0.5);
  }
}

@mixin button-base($variant, $color) {
  @include button-focus($color);
  border: 2px solid;

  @if $variant == solid {
    @if $color == text {
      background-color: rgb(var(--color-text));
      color: rgb(var(--color-textSecondary));
      border-color: transparent;
      &:hover:not(:disabled) {
        background-color: transparent;
        color: rgb(var(--color-text));
        border-color: rgb(var(--color-text));
      }
    } @else if $color == textSecondary {
      background-color: rgb(var(--color-textSecondary));
      color: rgb(var(--color-text));
      border-color: rgb(var(--color-text));
      &:hover:not(:disabled) {
        background-color: rgb(var(--color-text));
        color: rgb(var(--color-textSecondary));
        border-color: rgb(var(--color-text));
      }
    } @else {
      background-color: rgb(var(--color-#{$color}));
      color: rgb(var(--color-text));
      border-color: transparent;
      &:hover:not(:disabled) {
        background-color: transparent;
        color: rgb(var(--color-#{$color}));
        border-color: rgb(var(--color-#{$color}));
      }
    }
  } @else if $variant == outline {
    background-color: transparent;
    border-color: rgb(var(--color-#{$color}));
    color: rgb(var(--color-#{$color}));
    @if $color == textSecondary {
      color: rgb(var(--color-text));
    }
    &:hover:not(:disabled) {
      background-color: rgb(var(--color-#{$color}));
      color: rgb(var(--color-text));
      @if $color == text {
        background-color: rgb(var(--color-text));
        color: rgb(var(--color-background));
      } @else if $color == textSecondary {
        background-color: rgb(var(--color-text));
        color: rgb(var(--color-textSecondary));
      }
    }
  } @else if $variant == ghost {
    background-color: transparent;
    border-color: transparent;
    color: rgb(var(--color-#{$color}));
    &:hover:not(:disabled) {
      background-color: rgb(var(--color-#{$color}) / 0.1);
    }
  }
}

// ============================================================================
// ANIMAÇÕES
// ============================================================================
@keyframes pulse {
  0%,
  100% {
    opacity: 0.8;
  }
  50% {
    opacity: 0.5;
  }
}

// ============================================================================
// BASE CLASS
// ============================================================================
.btn {
  @include button-transition;
  @include button-hover-scale;
  @apply rounded-md font-medium cursor-pointer inline-flex items-center justify-center;

  &:disabled {
    @apply opacity-50 cursor-not-allowed;
    transform: none !important;
  }

  &--with-icon {
    @apply gap-2;
    .btn__icon {
      @apply w-4 h-4 flex-shrink-0;
    }
  }
}

// ============================================================================
// TAMANHOS
// ============================================================================
.btn {
  &--pequeno {
    @apply px-3 py-1.5 text-xs sm:text-sm;
    &.btn--with-icon .btn__icon {
      @apply w-3 h-3;
    }
  }
  &--medio {
    @apply px-4 py-2 text-sm sm:text-base;
    &.btn--with-icon .btn__icon {
      @apply w-4 h-4;
    }
  }
  &--grande {
    @apply px-6 py-3 text-base sm:text-lg;
    &.btn--with-icon .btn__icon {
      @apply w-5 h-5;
    }
  }
}

// ============================================================================
// VARIANTES DE COR
// ============================================================================
@each $color in $theme-colors {
  .btn--solid-#{$color} {
    @include button-base(solid, $color);
  }
  .btn--outline-#{$color} {
    @include button-base(outline, $color);
  }
  .btn--ghost-#{$color} {
    @include button-base(ghost, $color);
  }
}

// ============================================================================
// MODIFICADORES DE ESTADO E COMPOSTOS
// ============================================================================
.btn {
  &--loading {
    @apply relative;
    &::after {
      content: '';
      @apply absolute inset-0 rounded-md;
      background: rgba(255, 255, 255, 0.1);
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
  }
}

// ============================================================================
// LAYOUTS
// ============================================================================
.btn-container {
  @apply flex;
  &--start {
    @apply justify-start;
  }
  &--center {
    @apply justify-center;
  }
  &--end {
    @apply justify-end;
  }
}

.btn-group {
  @apply flex;
  .btn {
    @apply rounded-none;
    &:not(:first-child) {
      border-left: none;
    }
    &:first-child {
      @apply rounded-l-md;
    }
    &:last-child {
      @apply rounded-r-md;
    }
    &:only-child {
      @apply rounded-md;
    }
  }
}

// ============================================================================
// SPINNER
// ============================================================================
.btn__spinner {
  @apply animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full;
}
