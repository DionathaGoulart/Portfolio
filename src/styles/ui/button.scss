// ============================================================================
// BUTTON SYSTEM - SETTINGS
// ============================================================================

// Color variants for button system
$button-colors:
  primary, secondary, accent, text, textSecondary, error, success, warning;
$button-variants: solid, outline, ghost;

// ============================================================================
// BUTTON SYSTEM - TOOLS
// ============================================================================

// Button transition effect mixin
@mixin button-transition {
  @apply transform transition-all duration-200 ease-in-out;

  &:hover:not(:disabled) {
    transform: scale(1.05);
  }
}

// Focus ring mixin for accessibility
@mixin button-focus($color) {
  &:focus-visible {
    @apply outline-none;
    box-shadow:
      0 0 0 2px rgb(var(--color-background)),
      0 0 0 4px rgb(var(--color-#{$color}) / 0.5);
  }
}

// Main button variant generator mixin
@mixin button-variant($variant, $color) {
  @include button-focus($color);
  @apply border-2;

  @if $variant == solid {
    @if $color == text {
      background-color: rgb(var(--color-text));
      color: rgb(var(--color-textSecondary));
      @apply border-transparent;

      &:hover:not(:disabled) {
        @apply bg-transparent border-current;
        color: rgb(var(--color-text));
        border-color: rgb(var(--color-text));
      }
    } @else if $color == textSecondary {
      background-color: rgb(var(--color-textSecondary));
      color: rgb(var(--color-text));
      border-color: rgb(var(--color-text));

      &:hover:not(:disabled) {
        background-color: rgb(var(--color-text));
        color: rgb(var(--color-textSecondary));
        border-color: rgb(var(--color-text));
      }
    } @else {
      background-color: rgb(var(--color-#{$color}));
      color: rgb(var(--color-text));
      @apply border-transparent;

      &:hover:not(:disabled) {
        @apply bg-transparent border-current;
        color: rgb(var(--color-#{$color}));
      }
    }
  } @else if $variant == outline {
    @apply bg-transparent border-current;
    color: rgb(var(--color-#{$color}));

    &:hover:not(:disabled) {
      background-color: rgb(var(--color-#{$color}));
      color: rgb(var(--color-text));
    }
  } @else if $variant == ghost {
    @apply bg-transparent border-transparent;
    color: rgb(var(--color-#{$color}));

    &:hover:not(:disabled) {
      background-color: rgb(var(--color-#{$color}) / 0.1);
    }
  }
}

// ============================================================================
// BUTTON SYSTEM - BASE COMPONENT
// ============================================================================

.btn {
  @include button-transition;
  @apply rounded-md font-medium cursor-pointer inline-flex items-center justify-center;

  // Disabled state
  &:disabled {
    @apply opacity-50 cursor-not-allowed;
    transform: none;
  }

  // Icon support
  &--with-icon {
    @apply gap-2;

    .btn__icon {
      @apply flex-shrink-0;
    }
  }

  // Loading state
  &--loading {
    @apply relative;

    &::after {
      content: '';
      @apply absolute inset-0 rounded-md;
      background: rgba(255, 255, 255, 0.1);
      animation: btn-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
  }
}

// ============================================================================
// BUTTON SYSTEM - SIZE VARIANTS
// ============================================================================

.btn {
  &--pequeno {
    @apply px-3 py-1.5 text-xs;

    // Responsive typography
    @screen sm {
      @apply text-sm;
    }
  }

  &--medio {
    @apply px-4 py-2 text-sm;

    // Responsive typography
    @screen sm {
      @apply text-base;
    }
  }

  &--grande {
    @apply px-6 py-3 text-base;

    // Responsive typography
    @screen sm {
      @apply text-lg;
    }
  }
}

// Icon sizing by button size
.btn--pequeno.btn--with-icon .btn__icon {
  @apply w-3 h-3;
}

.btn--medio.btn--with-icon .btn__icon {
  @apply w-4 h-4;
}

.btn--grande.btn--with-icon .btn__icon {
  @apply w-5 h-5;
}

// ============================================================================
// BUTTON SYSTEM - COLOR VARIANTS
// ============================================================================

// Generate all color/variant combinations
@each $color in $button-colors {
  @each $variant in $button-variants {
    .btn--#{$variant}-#{$color} {
      @include button-variant($variant, $color);
    }
  }
}

// ============================================================================
// BUTTON SYSTEM - LAYOUT COMPONENTS
// ============================================================================

// Button container for alignment
.btn-container {
  @apply flex;

  &--start {
    @apply justify-start;
  }

  &--center {
    @apply justify-center;
  }

  &--end {
    @apply justify-end;
  }
}

// Button group for connected buttons
.btn-group {
  @apply flex;

  .btn {
    @apply rounded-none;

    &:not(:first-child) {
      border-left: none;
    }

    &:first-child {
      @apply rounded-l-md;
    }

    &:last-child {
      @apply rounded-r-md;
    }

    &:only-child {
      @apply rounded-md;
    }
  }
}

// ============================================================================
// BUTTON SYSTEM - UTILITY COMPONENTS
// ============================================================================

// Loading spinner component
.btn__spinner {
  @apply animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full;
}

// ============================================================================
// BUTTON SYSTEM - ANIMATIONS
// ============================================================================

@keyframes btn-pulse {
  0%,
  100% {
    opacity: 0.8;
  }
  50% {
    opacity: 0.5;
  }
}
