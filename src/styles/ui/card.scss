// ============================================================================
// COMPONENTE: CARD
// Descrição: Estilos para um componente de card com efeitos de profundidade e interatividade.
// ============================================================================

// ============================================================================
// CONFIGURAÇÕES E VARIÁVEIS
// ============================================================================

// Níveis de elevação (box-shadow) para diferentes estados
$shadow-elevation-1: 0 8px 20px -8px rgba(0, 0, 0, 0.08); // Elevação inicial sutil
$shadow-elevation-2: 0 16px 30px -10px rgba(0, 0, 0, 0.15); // Elevação no hover

// Escala de transformação no hover
$card-scale-hover: 1.02;

// ============================================================================
// MIXINS E FUNÇÕES
// ============================================================================

// Mixin para transições suaves em todos os estados
@mixin smooth-transition {
  @apply transform transition-all duration-300 ease-in-out;
}

// Efeito visual aplicado ao hover e focus
@mixin card-interactive-effect {
  transform: scale(#{$card-scale-hover}) translateY(-3px);
  box-shadow: $shadow-elevation-2;
}

// Anel de foco acessível
@mixin card-focus-ring($color: primary) {
  outline: none;
  &:focus-visible {
    // Foco de acessibilidade com cores baseadas no tema
    box-shadow:
      0 0 0 2px rgb(var(--color-surface)),
      0 0 0 4px rgb(var(--color-#{$color}) / 0.5);
  }
}

// Estilos de cor para o card.
// Usa o nome da cor para gerar o fundo e a borda.
@mixin card-color-variant($color) {
  // Se for a cor padrão, aplica estilos neutros
  @if $color == default {
    @apply bg-theme-surface border-theme-border;
  } @else {
    // Caso contrário, aplica um fundo semi-transparente para o "glassmorphism"
    background-color: rgb(var(--color-#{$color}) / 0.15);
    border-color: rgb(var(--color-#{$color}) / 0.3);
  }
}

// ============================================================================
// ANIMAÇÕES
// ============================================================================

// Animação de brilho para estado de carregamento
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

// ============================================================================
// ESTILOS BASE DO COMPONENTE
// ============================================================================

.card {
  @include smooth-transition;
  @apply border rounded-2xl p-6 relative;

  // Aplica a sombra inicial para dar profundidade
  box-shadow: $shadow-elevation-1;

  // Borda interna pontilhada para um detalhe sutil
  &::before {
    content: '';
    @apply absolute inset-2 rounded-xl border border-dotted;
    border-color: rgb(var(--color-border));
    z-index: 1;
  }

  // --- SUBCOMPONENTES ---
  &__header {
    @apply flex items-center gap-4 mb-3;
  }
  &__icon {
    @apply flex-shrink-0 text-3xl; // Ícone maior e mais destacado
  }
  &__badge {
    @apply absolute top-4 right-4;
  }
  &__content {
    @apply space-y-3;
  }
  &__tags {
    @apply flex flex-wrap gap-2 mt-4;
  }

  // --- TIPOGRAFIA ---
  &__title {
    @apply text-xl font-bold;
  }
  &__text {
    @apply text-base text-theme-text/60 leading-relaxed;
  }

  // --- ESTADOS DO CARD ---
  &--clickable {
    @apply cursor-pointer;
    @include card-focus-ring;
    &:hover:not(.card--disabled) {
      @include card-interactive-effect;
    }
  }

  &--disabled {
    @apply opacity-40 cursor-not-allowed;
    // Anula efeitos de hover/focus quando desabilitado
    &:hover {
      @apply transform-none shadow-none;
    }
  }

  &--loading {
    @apply relative overflow-hidden;
    &::after {
      content: '';
      @apply absolute inset-0;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.8),
        transparent
      );
      animation: shimmer 2s infinite;
    }
  }

  // --- VARIAÇÕES DE COR ---
  &--default {
    @include card-color-variant(default);
  }
  // Aplica as variações de cor para cada tema
  @each $color
    in (
      primary,
      secondary,
      accent,
      text,
      text-secondary,
      error,
      success,
      warning
    )
  {
    &--#{$color} {
      @include card-color-variant($color);
    }
  }
}

// ============================================================================
// CONTAINERS DE LAYOUT
// ============================================================================

.cards-grid {
  @apply grid gap-8; // Aumentado para melhor espaçamento
  &--2 {
    @apply grid-cols-1 sm:grid-cols-2;
  }
  &--3 {
    @apply grid-cols-1 sm:grid-cols-2 lg:grid-cols-3;
  }
}

.cards-list {
  @apply space-y-6;
}
