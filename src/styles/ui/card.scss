// ============================================================================
// CARD COMPONENT - VERSÃO OTIMIZADA
// ============================================================================

// Variáveis essenciais
$shadow-base: 0 2px 8px rgba(0, 0, 0, 0.1);
$shadow-hover: 0 8px 25px rgba(0, 0, 0, 0.15);
$card-scale: 1.02;

// ============================================================================
// MIXINS PRINCIPAIS
// ============================================================================

@mixin transition-smooth {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

@mixin card-hover-effect {
  transform: scale($card-scale) translateY(-4px);
  box-shadow: $shadow-hover;
}

@mixin card-variant($color) {
  @if $color == default {
    @apply bg-theme-surface border-theme-secondary;
  } @else {
    background: rgb(var(--color-#{$color}) / 0.05);
    border-color: rgb(var(--color-#{$color}) / 0.2);

    &:hover {
      background: rgb(var(--color-#{$color}) / 0.1);
    }
  }
}

// ============================================================================
// COMPONENTE PRINCIPAL
// ============================================================================

.card {
  @include transition-smooth;
  @apply relative border rounded-xl p-4 bg-white;
  box-shadow: $shadow-base;

  // Subcomponentes
  &__header {
    @apply flex items-center gap-3 mb-3;
  }

  &__icon {
    @apply flex-shrink-0;
    @include transition-smooth;

    svg {
      @apply w-5 h-5;
    }
  }

  &__icon-wrapper {
    @apply flex items-center justify-center w-5 h-5;
  }

  &__text-content {
    @apply flex-1;
  }

  &__horizontal-content {
    @apply flex items-center justify-between;
    @apply gap-3;
  }

  &__title {
    @apply text-base font-semibold leading-tight;
  }

  &__text {
    @apply text-sm text-gray-600 leading-relaxed;
  }

  &__content {
    @apply space-y-2;
  }

  &__tags {
    @apply flex flex-wrap gap-2 mt-3;
  }

  // Estados
  &--clickable {
    @apply cursor-pointer;

    &:hover:not(.card--disabled) {
      @include card-hover-effect;

      .card__icon {
        transform: scale(1.1);
      }
    }

    &:focus-visible {
      outline: 2px solid rgb(var(--color-primary));
      outline-offset: 2px;
    }
  }

  &--disabled {
    @apply opacity-50 pointer-events-none;
  }

  &--loading {
    @apply relative overflow-hidden;

    &::after {
      content: '';
      @apply absolute inset-0;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.8),
        transparent
      );
      animation: shimmer 2s infinite;
    }
  }

  // Variações de cor
  &--default {
    @include card-variant(default);
  }

  @each $color in (primary, secondary, success, warning, error) {
    &--#{$color} {
      @include card-variant($color);
    }
  }

  // Tamanhos
  &--compact {
    @apply p-3 rounded-lg;

    .card__title {
      @apply text-sm;
    }

    .card__icon {
      svg {
        @apply w-4 h-4;
      }
    }

    .card__icon-wrapper {
      @apply w-4 h-4;
    }
  }
}

// ============================================================================
// LAYOUTS
// ============================================================================

.cards-grid {
  @apply grid gap-4;

  &--2 {
    @apply grid-cols-1 sm:grid-cols-2;
  }
  &--3 {
    @apply grid-cols-1 sm:grid-cols-2 lg:grid-cols-3;
  }
  &--4 {
    @apply grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4;
  }
  &--5 {
    @apply grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5;
  }
}

.cards-list {
  @apply space-y-4;
}

// ============================================================================
// ANIMAÇÕES
// ============================================================================

@keyframes shimmer {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(100%);
  }
}
