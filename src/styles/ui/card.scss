// ============================================================================
// CARD STYLES - Otimizado e Organizado
// ============================================================================

// ============================================================================
// VARIÁVEIS
// ============================================================================
$card-scale: 1.02;
$card-shadow-opacity: 0.1;
$theme-colors:
  primary, secondary, accent, text, textSecondary, error, success, warning;

// ============================================================================
// MIXINS
// ============================================================================
@mixin card-transition {
  @apply transform transition-all duration-200 ease-in-out;
}

@mixin card-hover-effect {
  transform: scale(#{$card-scale});
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, $card-shadow-opacity);
}

@mixin card-focus-ring($color: primary) {
  outline: none;
  &:focus-visible {
    box-shadow:
      0 0 0 2px rgb(var(--color-background)),
      0 0 0 4px rgb(var(--color-#{$color}) / 0.5);
  }
}

// ============================================================================
// BASE
// ============================================================================
.card {
  @include card-transition;
  @apply border rounded-lg;

  // Estados
  &--clickable {
    @apply cursor-pointer;
    @include card-focus-ring;

    &:hover:not(.card--disabled) {
      @include card-hover-effect;
    }
  }

  &--disabled {
    @apply opacity-50 cursor-not-allowed;

    &:hover {
      transform: none !important;
      box-shadow: none !important;
    }
  }

  &--loading {
    @apply relative overflow-hidden;

    &::after {
      content: '';
      @apply absolute inset-0;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.4),
        transparent
      );
      animation: shimmer 2s infinite;
    }
  }

  &--elevated {
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 2px 4px -1px rgba(0, 0, 0, 0.06);

    &.card--clickable:hover:not(.card--disabled) {
      box-shadow:
        0 20px 25px -5px rgba(0, 0, 0, 0.1),
        0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
  }
}

// ============================================================================
// CORES
// ============================================================================
@mixin card-color-variant($color) {
  @if $color == default {
    @apply bg-theme-surface border-theme-border;

    &.card--clickable:hover:not(.card--disabled) {
      @apply bg-opacity-90;
    }
  } @else {
    background-color: rgb(var(--color-#{$color}) / 0.05);
    border-color: rgb(var(--color-#{$color}) / 0.2);

    &.card--clickable:hover:not(.card--disabled) {
      background-color: rgb(var(--color-#{$color}) / 0.1);
    }
  }
}

// Gerar variantes de cor
.card--default {
  @include card-color-variant(default);
}
@each $color in $theme-colors {
  .card--#{$color} {
    @include card-color-variant($color);
  }
}

// Bordas customizadas
@each $color in $theme-colors {
  .card--border-#{$color} {
    border-color: rgb(var(--color-#{$color}) / 0.3) !important;
  }
}

// ============================================================================
// LAYOUTS
// ============================================================================

// Horizontal
.card--horizontal {
  @apply flex flex-col justify-center;

  &.card--small {
    @apply min-h-12 sm:min-h-16 p-2 sm:p-3;
  }
  &.card--medium {
    @apply min-h-16 sm:min-h-20 p-3 sm:p-4;
  }
  &.card--large {
    @apply min-h-20 sm:min-h-24 p-4 sm:p-5;
  }
}

// With Icon
.card--with-icon {
  @apply p-6;

  &.card--compact {
    @apply p-4;
  }

  &__header {
    @apply flex items-center gap-2 mb-2;

    &-icon {
      @apply flex-shrink-0;
    }
  }
}

// Varied
.card--varied {
  @apply p-6 rounded-2xl relative;

  &.card--compact {
    @apply p-4;
  }

  &__badge {
    @apply absolute top-4 right-4;
  }

  &__content {
    @apply space-y-4;
  }

  &__tags {
    @apply flex flex-wrap gap-2 mt-4;
  }
}

// ============================================================================
// ALINHAMENTOS
// ============================================================================
.card--align-start {
  @apply text-left items-start;
}
.card--align-center {
  @apply text-center items-center;
}
.card--align-end {
  @apply text-right items-end;
}

// ============================================================================
// CONTAINERS
// ============================================================================
.cards-grid {
  @apply grid gap-4;

  &--1 {
    @apply grid-cols-1;
  }
  &--2 {
    @apply grid-cols-1 sm:grid-cols-2;
  }
  &--3 {
    @apply grid-cols-1 sm:grid-cols-2 lg:grid-cols-3;
  }
  &--4 {
    @apply grid-cols-1 sm:grid-cols-2 lg:grid-cols-4;
  }
}

.cards-list {
  @apply space-y-4;

  &--compact {
    @apply space-y-2;
  }
}

// ============================================================================
// ANIMAÇÕES
// ============================================================================
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}
