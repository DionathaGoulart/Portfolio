// ============================================================================
// TAG SYSTEM - OTIMIZADO
// ============================================================================

// Configurações
$colors:
  primary, secondary, accent, text, textSecondary, error, success, warning;
$variants: solid, outline, ghost;
$sizes: small, medium, large;

// Mixins
@mixin tag-base {
  @apply transform transition-all duration-200 ease-in-out inline-flex items-center justify-center font-medium rounded-full;

  &:focus-visible {
    outline: none;
    box-shadow:
      0 0 0 2px rgb(var(--color-background)),
      0 0 0 4px rgb(var(--color-primary) / 0.5);
  }
}

@mixin tag-variant($variant, $color) {
  @if $variant == solid {
    background-color: rgb(var(--color-#{$color}));
    color: rgb(var(--color-text));
    border: 1px solid rgb(var(--color-#{$color}));

    @if $color == text {
      background-color: rgb(var(--color-text));
      color: rgb(var(--color-background));
    } @else if $color == textSecondary {
      background-color: rgb(var(--color-textSecondary));
      color: rgb(var(--color-text));
    }

    &.tag--interactive:hover:not(.tag--disabled) {
      background-color: rgb(var(--color-#{$color}) / 0.8);
    }
  } @else if $variant == outline {
    background-color: transparent;
    border: 1px solid rgb(var(--color-#{$color}));
    color: rgb(var(--color-#{$color}));

    &.tag--interactive:hover:not(.tag--disabled) {
      background-color: rgb(var(--color-#{$color}) / 0.1);
    }
  } @else if $variant == ghost {
    background-color: rgb(var(--color-#{$color}) / 0.1);
    border: 1px solid transparent;
    color: rgb(var(--color-#{$color}));

    &.tag--interactive:hover:not(.tag--disabled) {
      background-color: rgb(var(--color-#{$color}) / 0.2);
    }
  }
}

// ============================================================================
// BASE
// ============================================================================

.tag {
  @include tag-base;

  // Estados
  &--interactive {
    @apply cursor-pointer;
    &:hover:not(.tag--disabled) {
      transform: scale(1.05);
    }
  }

  &--disabled {
    @apply opacity-50 cursor-not-allowed;
    &:hover {
      transform: none !important;
    }
  }
}

// ============================================================================
// TAMANHOS
// ============================================================================

.tag--small {
  @apply text-xs px-2 py-0.5;
}
.tag--medium {
  @apply text-sm px-3 py-1;
}
.tag--large {
  @apply text-base px-4 py-1.5;
}

// ============================================================================
// VARIANTES DE COR
// ============================================================================

@each $color in $colors {
  @each $variant in $variants {
    .tag--#{$variant}-#{$color} {
      @include tag-variant($variant, $color);
    }
  }
}

// ============================================================================
// MODIFICADORES
// ============================================================================

.tag {
  // Com ícone
  &--with-icon {
    @apply gap-1;
    &__icon {
      @apply flex-shrink-0;
    }
  }

  // Removível
  &--removable {
    @apply pr-1;
    &__remove-btn {
      @apply ml-1 hover:bg-black/10 rounded-full p-0.5 transition-colors;
      &-icon {
        @apply w-3 h-3;
      }
    }
  }

  // Com badge
  &--with-badge {
    @apply relative;
    &__badge {
      @apply absolute -top-1 -right-1 min-w-4 h-4 flex items-center justify-center;
      @apply text-xs rounded-full bg-red-500 text-white px-1;
    }
  }
}

// Ícones por tamanho
.tag--small.tag--with-icon .tag__icon {
  @apply w-2.5 h-2.5;
}
.tag--medium.tag--with-icon .tag__icon {
  @apply w-3 h-3;
}
.tag--large.tag--with-icon .tag__icon {
  @apply w-4 h-4;
}

// ============================================================================
// STATUS TAGS
// ============================================================================

@each $status, $color in (online: success, offline: error, pending: warning) {
  .tag--status-#{$status} {
    @apply text-xs px-2 py-0.5 relative;
    background-color: rgb(var(--color-#{$color}) / 0.1);
    color: rgb(var(--color-#{$color}));

    &::before {
      content: '';
      @apply w-2 h-2 rounded-full mr-1;
      background-color: rgb(var(--color-#{$color}));
    }
  }
}

// ============================================================================
// CONTAINERS
// ============================================================================

.tag-group {
  @apply flex flex-wrap gap-2;
  &--compact {
    @apply gap-1;
  }
}
