// ============================================================================
// TAG STYLES - Otimizado e Organizado
// ============================================================================

// ============================================================================
// VARIÁVEIS
// ============================================================================
$tag-scale: 1.05;
$theme-colors:
  primary, secondary, accent, text, textSecondary, error, success, warning;

// ============================================================================
// MIXINS
// ============================================================================
@mixin tag-transition {
  @apply transform transition-all duration-200 ease-in-out;
}

@mixin tag-hover-effect {
  transform: scale($tag-scale);
}

@mixin tag-focus-ring($color: primary) {
  outline: none;
  &:focus-visible {
    box-shadow:
      0 0 0 2px rgb(var(--color-background)),
      0 0 0 4px rgb(var(--color-#{$color}) / 0.5);
  }
}

@mixin tag-variant($variant, $color) {
  @include tag-transition;
  @include tag-focus-ring($color);

  @if $variant == solid {
    @if $color == text {
      background-color: rgb(var(--color-text));
      color: rgb(var(--color-background));
      border: 1px solid rgb(var(--color-text));

      &.tag--interactive:hover:not(.tag--disabled) {
        background-color: rgb(var(--color-text) / 0.8);
      }
    } @else if $color == textSecondary {
      background-color: rgb(var(--color-textSecondary));
      color: rgb(var(--color-text));
      border: 1px solid rgb(var(--color-textSecondary));

      &.tag--interactive:hover:not(.tag--disabled) {
        background-color: rgb(var(--color-textSecondary) / 0.8);
      }
    } @else {
      background-color: rgb(var(--color-#{$color}));
      color: rgb(var(--color-text));
      border: 1px solid rgb(var(--color-#{$color}));

      &.tag--interactive:hover:not(.tag--disabled) {
        background-color: rgb(var(--color-#{$color}) / 0.8);
      }
    }
  }

  @if $variant == outline {
    background-color: transparent;
    border: 1px solid rgb(var(--color-#{$color}));

    @if $color == text or $color == textSecondary {
      color: rgb(var(--color-#{$color}));
    } @else {
      color: rgb(var(--color-#{$color}));
    }

    &.tag--interactive:hover:not(.tag--disabled) {
      background-color: rgb(var(--color-#{$color}) / 0.1);
    }
  }

  @if $variant == ghost {
    background-color: rgb(var(--color-#{$color}) / 0.1);
    border: 1px solid transparent;

    @if $color == text or $color == textSecondary {
      color: rgb(var(--color-#{$color}));
    } @else {
      color: rgb(var(--color-#{$color}));
    }

    &.tag--interactive:hover:not(.tag--disabled) {
      background-color: rgb(var(--color-#{$color}) / 0.2);
    }
  }
}

// ============================================================================
// BASE
// ============================================================================
.tag {
  @apply inline-flex items-center justify-center font-medium rounded-full;

  // Estados
  &--interactive {
    @apply cursor-pointer;

    &:hover:not(.tag--disabled) {
      @include tag-hover-effect;
    }
  }

  &--disabled {
    @apply opacity-50 cursor-not-allowed;

    &:hover {
      transform: none !important;
    }
  }
}

// ============================================================================
// TAMANHOS
// ============================================================================
.tag--small {
  @apply text-xs px-2 py-0.5;
}
.tag--medium {
  @apply text-sm px-3 py-1;
}
.tag--large {
  @apply text-base px-4 py-1.5;
}

// ============================================================================
// CORES E VARIANTES
// ============================================================================

// Solid
@each $color in $theme-colors {
  .tag--solid-#{$color} {
    @include tag-variant(solid, $color);
  }
}

// Outline
@each $color in $theme-colors {
  .tag--outline-#{$color} {
    @include tag-variant(outline, $color);
  }
}

// Ghost
@each $color in $theme-colors {
  .tag--ghost-#{$color} {
    @include tag-variant(ghost, $color);
  }
}

// ============================================================================
// MODIFICADORES
// ============================================================================

// Com ícone
.tag--with-icon {
  @apply gap-1;

  &__icon {
    @apply flex-shrink-0;
  }

  &.tag--small .tag--with-icon__icon {
    @apply w-2.5 h-2.5;
  }
  &.tag--medium .tag--with-icon__icon {
    @apply w-3 h-3;
  }
  &.tag--large .tag--with-icon__icon {
    @apply w-4 h-4;
  }
}

// Removível
.tag--removable {
  @apply pr-1;

  &__remove-btn {
    @apply ml-1 hover:bg-black/10 rounded-full p-0.5 transition-colors;

    &-icon {
      @apply w-3 h-3;
    }
  }
}

// Com badge
.tag--with-badge {
  @apply relative;

  &__badge {
    @apply absolute -top-1 -right-1 min-w-4 h-4 flex items-center justify-center;
    @apply text-xs rounded-full bg-theme-error text-white px-1;
  }
}

// ============================================================================
// CONTAINERS
// ============================================================================
.tag-group {
  @apply flex flex-wrap gap-2;

  &--compact {
    @apply gap-1;
  }
}

// ============================================================================
// STATUS TAGS (especiais)
// ============================================================================
.tag--status-online {
  @include tag-variant(ghost, success);
  @apply text-xs px-2 py-0.5 relative;

  &::before {
    content: '';
    @apply w-2 h-2 bg-theme-success rounded-full mr-1;
  }
}

.tag--status-offline {
  @include tag-variant(ghost, error);
  @apply text-xs px-2 py-0.5 relative;

  &::before {
    content: '';
    @apply w-2 h-2 bg-theme-error rounded-full mr-1;
  }
}

.tag--status-pending {
  @include tag-variant(ghost, warning);
  @apply text-xs px-2 py-0.5 relative;

  &::before {
    content: '';
    @apply w-2 h-2 bg-theme-warning rounded-full mr-1;
  }
}
