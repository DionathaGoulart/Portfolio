// ============================================================================
// TEXT SYSTEM - OTIMIZADO COM SUPORTE A 5 COLUNAS
// ============================================================================

// Configurações
$colors:
  primary, secondary, accent, text, textSecondary, error, success, warning;
$sizes: pequeno, medio, grande;
$weights: light, normal, medium, semibold, bold;
$aligns: start, center, end;

// Mixins
@mixin text-transition {
  @apply transition-all duration-300 ease-in-out;
}

@mixin decorative-border($position) {
  @apply relative pt-3;
  &::before {
    content: '';
    @apply absolute top-0 w-24 h-1 bg-theme-primary rounded-xl;
    @if $position == start {
      @apply left-0;
    } @else if $position == center {
      @apply left-1/2 -translate-x-1/2;
    } @else if $position == end {
      @apply right-0;
    }
  }
}

// ============================================================================
// BASE
// ============================================================================

.text {
  @include text-transition;

  // Tipos de elemento
  &--p {
    @apply block opacity-80;
  }
  &--span {
    @apply inline-block w-full;
  }

  // Decorações
  &--italic {
    @apply italic;
  }
  &--underline {
    @apply underline;
  }
  &--line-through {
    @apply line-through;
  }
  &--uppercase {
    @apply uppercase;
  }
  &--lowercase {
    @apply lowercase;
  }
  &--capitalize {
    @apply capitalize;
  }
  &--truncate {
    @apply truncate;
  }
  &--break-words {
    @apply break-words;
  }
  &--break-all {
    @apply break-all;
  }

  // Alinhamentos
  &--baseline {
    @apply align-baseline;
  }
  &--top {
    @apply align-top;
  }
  &--middle {
    @apply align-middle;
  }
  &--bottom {
    @apply align-bottom;
  }

  // Efeitos especiais
  &--highlight {
    @apply bg-theme-accent/20 px-1 rounded;
  }
  &--code {
    @apply font-mono text-sm bg-theme-surface px-1.5 py-0.5 rounded border;
  }
  &--gradient {
    @apply bg-gradient-to-r from-theme-primary to-theme-accent bg-clip-text text-transparent;
  }
  &--shadow {
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }
  &--shadow-strong {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }
}

// ============================================================================
// TAMANHOS E CORES
// ============================================================================

// Tamanhos
.text--pequeno {
  @apply text-sm leading-relaxed;
}
.text--medio {
  @apply text-base leading-relaxed;
}
.text--grande {
  @apply text-lg leading-relaxed;
}

// Cores
@each $color in $colors {
  .text--#{$color} {
    color: rgb(var(--color-#{$color}));
  }
}

// Pesos
@each $weight in $weights {
  .text--#{$weight} {
    font-weight: #{$weight};
  }
}

// Alinhamentos de texto
.text--start {
  @apply text-left;
}
.text--center {
  @apply text-center;
}
.text--end {
  @apply text-right;
}

// Line heights
.text--leading-tight {
  @apply leading-tight;
}
.text--leading-normal {
  @apply leading-normal;
}
.text--leading-relaxed {
  @apply leading-relaxed;
}
.text--leading-loose {
  @apply leading-loose;
}

// ============================================================================
// BORDAS DECORATIVAS
// ============================================================================

@each $position in $aligns {
  .text--border-#{$position} {
    @include decorative-border($position);
  }
}

// ============================================================================
// RESPONSIVIDADE
// ============================================================================

.text--responsive-small {
  @apply text-base sm:text-base lg:text-lg;
}
.text--responsive-medium {
  @apply text-base md:text-lg lg:text-xl;
}
.text--responsive-large {
  @apply text-base md:text-xl lg:text-2xl;
}

// ============================================================================
// LAYOUTS DE COLUNA - CORRIGIDO E EXPANDIDO
// ============================================================================

.text--column-layout {
  @apply w-full;

  .text__columns {
    @apply flex items-start justify-between flex-col md:flex-row;
  }

  .text__column {
    @apply flex-1 min-w-0; // min-w-0 ajuda com overflow em flex items
  }

  .text__column-content {
    @apply w-full h-full;
  }

  // Configurações específicas por número de colunas
  &.text--columns-1 .text__columns {
    @apply flex-col;
    .text__column {
      @apply w-full;
    }
  }

  &.text--columns-2 .text__columns {
    @apply gap-4;
    .text__column {
      @apply w-full md:w-1/2;
    }
  }

  &.text--columns-3 .text__columns {
    @apply gap-3;
    .text__column {
      @apply w-full md:w-1/3;
    }
  }

  &.text--columns-4 .text__columns {
    @apply gap-2;
    .text__column {
      @apply w-full md:w-1/4;
    }
  }

  &.text--columns-5 .text__columns {
    @apply gap-2;
    .text__column {
      @apply w-full md:w-1/5;
    }
  }

  // Gaps - aplicados aos containers de coluna
  &.text--gap-small .text__columns {
    @apply gap-2 md:gap-3;
  }
  &.text--gap-medium .text__columns {
    @apply gap-4 md:gap-6;
  }
  &.text--gap-large .text__columns {
    @apply gap-6 md:gap-8;
  }
}

// ============================================================================
// RESPONSIVIDADE MOBILE
// ============================================================================

@media (max-width: 768px) {
  .text--column-layout {
    .text__columns {
      @apply flex-col gap-4;
    }
    .text__column {
      @apply w-full;
    }
  }
}

// ============================================================================
// AJUSTES PARA MELHOR DISTRIBUIÇÃO DE COLUNAS
// ============================================================================

// Em telas menores que tablet, sempre em coluna única
@media (max-width: 640px) {
  .text--column-layout .text__columns {
    @apply flex-col;
    .text__column {
      @apply w-full;
    }
  }
}

// Em tablets, ajustar colunas 4 e 5 para 2 colunas
@media (min-width: 641px) and (max-width: 1024px) {
  .text--column-layout {
    &.text--columns-4 .text__columns .text__column {
      @apply w-1/2;
    }
    &.text--columns-5 .text__columns .text__column {
      @apply w-1/2;
    }
  }
}
